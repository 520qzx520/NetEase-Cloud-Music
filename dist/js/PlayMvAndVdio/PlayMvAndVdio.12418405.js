import{_ as V,a as d,g as k,o as i,c,b as t,t as s,F as C,d as y,w as f,a5 as m,e as b,p as S,f as $,h as x,r as N}from"../index-e6aff8d6.js";import{E as w}from"../el-select/el-select.8325e87a.js";var M="./static/css//user-25423d5f.jpg";const I={data(){return{commentList:[],total:1e3,pageSize:20,pageNo:1,commenttotal:0,hotComments:0}},props:["type","id"],mounted(){this.getMVOrVdioComment()},methods:{async getMVOrVdioComment(){if(this.type==1){let e=await d.getVdioComment(this.id,this.pageSize,(this.pageNo-1)*this.pageSize);this.commentList=e.data.comments,this.commenttotal=e.data.total,this.total=e.data.total,this.hotComments=e.data.hotComments.length,console.log(111),console.log(this.pageNo)}else{let e=await d.getMvComment(this.id,this.pageSize,(this.pageNo-1)*this.pageSize);console.log(this.pageNo),this.commentList=e.data.comments,this.commenttotal=e.data.total,this.total=e.data.total,this.hotComments=e.data.hotComments.length,console.log(e.data.comments)}},handleSizeChange(e){this.pageSize=e,this.getMVOrVdioComment()},handleCurrentChange(e){this.pageNo=e,this.getMVOrVdioComment()}}},u=e=>(S("data-v-7b339f13"),e=e(),$(),e),U={class:"comment-box"},q={class:"comment-contain"},D={class:"comment-contain-title"},L=u(()=>t("h3",null,"\u70ED\u95E8\u8BC4\u8BBA",-1)),O=x('<div class="user-input" data-v-7b339f13><div class="input" data-v-7b339f13><img src="'+M+'" data-v-7b339f13><textarea class="text" placeholder="\u8BC4\u8BBA" data-v-7b339f13></textarea></div><div class="user-input-icon" data-v-7b339f13><i class="emjoy" data-v-7b339f13></i><i class="at" data-v-7b339f13></i><span data-v-7b339f13>\uFF08520\u5B57\uFF09</span><a data-v-7b339f13>\u8BC4\u8BBA</a></div></div>',1),A={class:"comment-contain-title newcomment"},B=u(()=>t("h3",null,"\u6700\u65B0\u8BC4\u8BBA",-1)),E={class:"comment-list-flex"},P={class:"lists"},j={style:{color:"red"}},F={class:"lists"},R={style:{color:"blue"}},T={class:"btm"},G={class:"btm-left"},H=u(()=>t("i",{class:"zan"},null,-1)),J=u(()=>t("span",null,"| \u56DE\u590D",-1));function K(e,l,r,a,o,h){const _=w,g=k("lazy");return i(),c("div",U,[t("div",q,[t("div",D,[L,t("span",null,"("+s(o.hotComments)+")",1)]),O,t("div",A,[B,t("span",null,"("+s(o.commenttotal)+")",1)]),(i(!0),c(C,null,y(o.commentList,n=>(i(),c("div",{class:"comment-list",key:n.commentId},[t("div",E,[f(t("img",null,null,512),[[g,n.user.avatarUrl]]),t("div",P,[t("a",j,s(n.user.nickname),1),t("p",null,s(n.content),1),(i(!0),c(C,null,y(n.beReplied,(p,z)=>(i(),c("div",{class:"comment-list-flex",key:z},[f(t("img",null,null,512),[[g,p.user.avatarUrl]]),t("div",F,[t("a",R,s(p.user.nickname),1),t("p",null,s(p.content),1)])]))),128))])]),t("div",T,[t("span",G,s(n.timeStr),1),H,m(" ("+s(n.likedCount)+") ",1),J])]))),128)),b(_,{background:"",onSizeChange:h.handleSizeChange,onCurrentChange:h.handleCurrentChange,modelValue:o.pageNo,"onUpdate:modelValue":l[0]||(l[0]=n=>o.pageNo=n),"page-size":o.pageSize,layout:"prev, pager, next",total:o.total,class:"pagination"},null,8,["onSizeChange","onCurrentChange","modelValue","page-size","total"])])])}var Q=V(I,[["render",K],["__scopeId","data-v-7b339f13"]]);const W={data(){return{url:"",commentCount:0,likedCount:0,shareCount:0}},components:{Comment:Q},mounted(){this.getUrl(this.$route.query.type,this.$route.query.id)},methods:{async getUrl(e,l){if(e==1){let r=await d.getVideoUrl(l);this.url=r.data.urls[0].url;let a=await d.getVdioDetail(l);this.commentCount=a.data.commentCount,this.likedCount=a.data.likedCount,this.shareCount=a.data.shareCount}else{let r=await d.getMvUrl(l);this.url=r.data.data.url;let a=await d.getMvDetail(l);this.commentCount=a.data.commentCount,this.likedCount=a.data.likedCount,this.shareCount=a.data.shareCount}}}},v=e=>(S("data-v-1b073e37"),e=e(),$(),e),X={class:"playMvAndVdio"},Y={class:"play-flex"},Z={class:"play-contain"},tt={class:"title"},et={class:"play-mv"},st=["src"],ot={class:"icons"},at={class:"like"},nt=v(()=>t("em",null,null,-1)),lt={class:"collection"},it=v(()=>t("em",null,null,-1)),ct={class:"share"},dt=v(()=>t("em",null,null,-1));function rt(e,l,r,a,o,h){const _=N("Comment");return i(),c("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[t("h3",null,s(e.$route.query.title),1),t("a",null,s(e.$route.query.name),1)]),t("div",et,[t("video",{src:o.url,controls:"",class:"video"},null,8,st)]),t("ul",ot,[t("a",at,[t("i",null,[nt,m(" ("+s(o.likedCount)+") ",1)])]),t("a",lt,[t("i",null,[it,m(" ("+s(o.commentCount)+") ",1)])]),t("a",ct,[t("i",null,[dt,m(" ("+s(o.shareCount)+") ",1)])])]),b(_,{type:this.$route.query.type,id:this.$route.query.id},null,8,["type","id"])])])])}var ht=V(W,[["render",rt],["__scopeId","data-v-1b073e37"]]);export{ht as default};
