import{E as g}from"../el-select/el-select.8325e87a.js";import{_ as p,a as v,g as _,o as l,c,b as a,F as m,d as S,e as f,t as r,w as y,p as C,f as z}from"../index-e6aff8d6.js";const M={name:"searchMv",data(){return{songlist:[],total:20,pageSize:25,pageNo:1,videos:[],emitShow:!0}},mounted(){this.eventHub.$on("getMv",e=>{this.getDataForSearchMv()})},methods:{async getDataForSearchMv(){let e=await v.getDataForSearch(this.$route.params.keywords,this.$route.params.type,this.pageSize,(this.pageNo-1)*this.pageSize);this.videos=e.data.result.videos,console.log(e.data),this.emitShow&&(this.$emit("on-child",this.total),this.emitShow=!1,console.log("mv"))},async getVideoOrMvUrl(e,s,i,d){this.$router.push({name:"PlayMvAndVdio",query:{id:e,type:s,title:i,name:d}})},handleSizeChange(e){this.pageSize=e,this.getDataForSearchMv()},handleCurrentChange(e){this.pageNo=e,this.getDataForSearchMv()},cutString(e){return e?e.length>8?e.substring(0,7)+"...":e:""},timeHandel(e){let s=this.timeAdd0(parseInt(e/6e4%60)),i=this.timeAdd0(parseInt(e/1e3%60));return`${s}:${i}`},timeAdd0(e){return e<9?`0${e}`:e}},unmounted(){this.eventHub.$off("getMv"),console.log(22)}},N=e=>(C("data-v-104b249f"),e=e(),z(),e),w={class:"searchsinger"},D={class:"contain"},V={class:"singer-list"},b=["onClick"],k={class:"mv-time"},F={class:"mv-icon"},I=N(()=>a("i",{class:"vidio"},null,-1));function x(e,s,i,d,o,n){const h=g,u=_("lazy");return l(),c("div",w,[a("div",D,[a("div",V,[a("ul",null,[(l(!0),c(m,null,S(o.videos,t=>(l(),c("li",{key:t.vid,onClick:A=>n.getVideoOrMvUrl(t.vid,t.type,t.title,t.creator[0].userName)},[a("span",k,r(n.timeHandel(t.durationms)),1),a("div",F,[I,a("span",null,r(t.playTime),1)]),y(a("img",null,null,512),[[u,t.coverUrl]]),a("p",null,r(n.cutString(t.title)),1),a("p",null,r(n.cutString(t.creator[0].userName)),1)],8,b))),128))])]),f(h,{background:"",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange,modelValue:o.pageNo,"onUpdate:modelValue":s[0]||(s[0]=t=>o.pageNo=t),"page-size":o.pageSize,layout:"prev, pager, next",total:o.total,class:"pagination"},null,8,["onSizeChange","onCurrentChange","modelValue","page-size","total"])])])}var B=p(M,[["render",x],["__scopeId","data-v-104b249f"]]);export{B as default};
