import{_ as y,a as C,g as x,o as i,c as l,b as t,t as n,F as p,d as g,w as v,a5 as k,e as f,p as S,f as z,h as w,ah as M,r as U}from"../index-e6aff8d6.js";import{E as N}from"../el-select/el-select.8325e87a.js";const I={data(){return{commentList:[],total:1e3,pageSize:20,pageNo:1,commenttotal:0,hotComments:0}},props:["id"],mounted(){this.getMusicComment()},methods:{async getMusicComment(){let s=await C.getMusicComment(this.id,this.pageSize,(this.pageNo-1)*this.pageSize);this.commentList=s.data.comments,this.commenttotal=s.data.total,this.total=s.data.total,this.hotComments=s.data.hotComments.length,console.log(s.data)},handleSizeChange(s){this.pageSize=s,this.getMusicComment()},handleCurrentChange(s){this.pageNo=s,this.getMusicComment()}}},m=s=>(S("data-v-346d734f"),s=s(),z(),s),V={class:"comment-box"},D={class:"comment-contain"},L={class:"comment-contain-title"},j=m(()=>t("h3",null,"\u70ED\u95E8\u8BC4\u8BBA",-1)),R=w('<div class="user-input" data-v-346d734f><div class="input" data-v-346d734f><img src="'+M+'" data-v-346d734f><textarea class="text" placeholder="\u8BC4\u8BBA" data-v-346d734f></textarea></div><div class="user-input-icon" data-v-346d734f><i class="emjoy" data-v-346d734f></i><i class="at" data-v-346d734f></i><span data-v-346d734f>\uFF08520\u5B57\uFF09</span><a data-v-346d734f>\u8BC4\u8BBA</a></div></div>',1),B={class:"comment-contain-title newcomment"},E=m(()=>t("h3",null,"\u6700\u65B0\u8BC4\u8BBA",-1)),G={class:"comment-list-flex"},P={class:"lists"},F={class:"lists"},H={class:"btm"},T={class:"btm-left"},q=m(()=>t("i",{class:"zan"},null,-1)),A=m(()=>t("span",null,"| \u56DE\u590D",-1));function J(s,d,c,$,e,_){const u=N,r=x("lazy");return i(),l("div",V,[t("div",D,[t("div",L,[j,t("span",null,"("+n(e.hotComments)+")",1)]),R,t("div",B,[E,t("span",null,"("+n(e.commenttotal)+")",1)]),(i(!0),l(p,null,g(e.commentList,a=>(i(),l("div",{class:"comment-list",key:a.commentId},[t("div",G,[v(t("img",null,null,512),[[r,a.user.avatarUrl]]),t("div",P,[t("a",null,n(a.user.nickname),1),t("p",null,n(a.content),1),(i(!0),l(p,null,g(a.beReplied,(h,b)=>(i(),l("div",{class:"comment-list-flex",key:b},[v(t("img",null,null,512),[[r,h.user.avatarUrl]]),t("div",F,[t("a",null,n(h.user.nickname),1),t("p",null,n(h.content),1)])]))),128))])]),t("div",H,[t("span",T,n(a.timeStr),1),q,k(" ("+n(a.likedCount)+") ",1),A])]))),128)),f(u,{background:"",onSizeChange:_.handleSizeChange,onCurrentChange:_.handleCurrentChange,modelValue:e.pageNo,"onUpdate:modelValue":d[0]||(d[0]=a=>e.pageNo=a),"page-size":e.pageSize,layout:"prev, pager, next",total:e.total,class:"pagination"},null,8,["onSizeChange","onCurrentChange","modelValue","page-size","total"])])])}var K=y(I,[["render",J],["__scopeId","data-v-346d734f"]]);const O={data(){return{imgURl:"",name:"",singer:"",zjname:"",com:"",lyric:{}}},components:{Comment:K},mounted(){this.getSong(this.$route.params.id),this.eventHub.$on("goLyric",s=>{this.getlyric()})},methods:{async getSong(s){let c=(await C.getSong(s)).data.songs[0];this.imgURl=c.al.picUrl,this.name=c.name,this.singer=c.ar[0].name,this.zjname=c.al.name,this.com=c.cp},async getUrl(s){await this.$store.dispatch("GetMusicData/getMusicUrl",s),this.eventHub.$emit("goData","Go")},async getlyric(){this.lyric=await this.$store.state.GetMusicData.lyric},cutString(s){return s?s.length>8?s.substring(0,8)+"...":s:""}},unmounted(){}},o=s=>(S("data-v-626e1bbe"),s=s(),z(),s),Q={class:"box"},W={class:"right"},X={class:"right-margin"},Y={class:"right-img"},Z=["src"],tt=o(()=>t("span",{class:"bgt"},null,-1)),st={class:"right-sub"},et=o(()=>t("i",{class:"i"},null,-1)),nt={class:"singer"},at=o(()=>t("span",null,"\u6B4C\u624B",-1)),ot={class:"span"},it={class:"zj"},lt=o(()=>t("span",null,"\u6240\u5C5E\u4E13\u8F91:",-1)),ct={class:"icon"},dt=o(()=>t("i",{class:"play-icon"},null,-1)),rt=o(()=>t("span",null,"\u64AD\u653E",-1)),_t=[dt,rt],mt=o(()=>t("a",{class:"add"},null,-1)),ut=o(()=>t("a",{class:"dis"},[t("span",null,"\u6536\u85CF")],-1)),ht=o(()=>t("a",{class:"share"},[t("span",null,"\u5206\u4EAB")],-1)),pt=o(()=>t("a",{class:"download"},[t("span",null,"\u4E0B\u8F7D")],-1)),gt={class:"comment"},vt={class:"lyric"},yt=o(()=>t("h4",null,"\u6B4C\u8BCD",-1));function Ct(s,d,c,$,e,_){const u=U("Comment");return i(),l("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("img",{src:e.imgURl},null,8,Z),tt]),t("div",st,[t("div",null,[et,t("h3",null,n(e.name),1),t("div",nt,[at,t("span",ot,n(e.singer),1)]),t("div",it,[lt,t("span",null,n(e.zjname),1)]),t("div",ct,[t("a",{class:"play",onClick:d[0]||(d[0]=r=>_.getUrl(s.$route.params.id))},_t),mt,ut,ht,pt,t("a",gt,[t("span",null,n(e.com),1)])])]),t("div",vt,[yt,(i(!0),l(p,null,g(e.lyric,(r,a)=>(i(),l("p",{key:a},n(r),1))),128))])])]),f(u,{id:this.$route.params.id},null,8,["id"])])])}var zt=y(O,[["render",Ct],["__scopeId","data-v-626e1bbe"]]);export{zt as default};
