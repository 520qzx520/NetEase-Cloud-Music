import{_ as m,a as h,o as a,c,w as u,v as g,b as s,F as p,d as f,t as i,p as S,f as w,i as v}from"../index-e6aff8d6.js";const I={data(){return{containImg:!0,event:[],pageSize:30,lasttime:-1,Height:1e6,timer:[],flag:!0,eventCount:0,follows:0,followeds:0,avatarUrl:"",nickname:""}},mounted(){this.userData(),this.getUSerDetail(),this.lisenEventScoll()},methods:{userData(){localStorage.getItem("USER")&&(this.containImg=!1,this.getFriendEvent())},async getFriendEvent(){if(this.flag==!1)return;this.flag=!1;let e=await h.getFriendEvents(this.pageSize,localStorage.getItem("COOKIE"),this.lasttime);if(e.data.event.length==0){clearInterval(this.timer);return}else this.event=e.data.event;this.lasttime=e.data.lasttime},handel(e){return e.song?e.song:""},handel1(e){return e.song?e.song.artists[0].name:""},handel2(e){return e.song?e.song.album.picUrl:""},handel3(e){return e.pics[0]?e.pics[0].originUrl:""},handleScrollx(){window.pageYOffset>=this.Height-2500&&this.getFriendEvent(),this.Height=document.body.scrollHeight},lisenEventScoll(){window.addEventListener("scroll",this.handleScrollx,!0),this.timer=setInterval(()=>{this.flag=!0},1e3)},async getUSerDetail(){let e=localStorage.getItem("USER"),d=localStorage.getItem("COOKIE"),_=JSON.parse(e).userId,r=await h.getUSerDetail(_,d),t=r.data.profile;this.eventCount=t.eventCount,this.follows=t.follows,this.followeds=t.followeds,this.avatarUrl=t.avatarUrl,this.nickname=t.nickname,console.log(r.data)}},unmounted(){clearInterval(this.timer),window.removeEventListener("scroll",this.handleScrollx)}},n=e=>(S("data-v-4f7f3cae"),e=e(),w(),e),y={class:"mymusic"},x={class:"contain"},E=n(()=>s("div",{class:"img"},[s("div",{class:"login"})],-1)),O=[E],U={class:"mygz"},k={class:"my-flex"},C={class:"my-left"},D=n(()=>s("div",{class:"title"},[s("h3",null,"\u52A8\u6001")],-1)),F={class:"user-contain"},N={class:"top"},J=["src"],j={class:"text"},z=n(()=>s("span",null,"\u4E91\u97F3\u4E50\u5C0F\u79D8\u4E66",-1)),b=["src"],H=n(()=>s("span",null,"\u5206\u4EAB\u5355\u66F2",-1)),B=n(()=>s("a",null,"232321312",-1)),L={class:"user-main"},K={key:0,class:"user-mv"},R=["src"],V={class:"mv-text"},Y={class:"name"},q={key:1,class:"bigimg"},A=["src"],G={class:"icons"},M={class:"dz"},P=n(()=>s("i",null,null,-1)),Q={class:"zf"},T=n(()=>s("i",null,null,-1)),W={class:"pl"},X=n(()=>s("i",null,null,-1)),Z={class:"my-right"},$={class:"right-contain"},ss={class:"img-p"},es=["src"],ts={class:"right-user-list"},ls=n(()=>s("a",null,"\u52A8\u6001",-1)),ns={class:"li2"},is=n(()=>s("a",null,"\u5173\u6CE8",-1)),os=n(()=>s("a",null,"\u7C89\u4E1D",-1));function as(e,d,_,r,t,o){return a(),c("div",y,[u(s("div",x,O,512),[[g,t.containImg]]),u(s("div",U,[s("div",k,[s("div",C,[D,s("div",F,[(a(!0),c(p,null,f(t.event,l=>(a(),c("div",{class:"list",key:l.id},[s("div",N,[s("img",{src:l.user.avatarUrl},null,8,J),s("div",j,[s("div",null,[z,s("img",{src:l.user.avatarDetail.identityIconUrl,style:{width:"17px",height:"17px"}},null,8,b),H]),B,s("p",null,i(JSON.parse(l.json).msg),1)])]),s("div",L,[o.handel2(JSON.parse(l.json))?(a(),c("div",K,[s("img",{src:o.handel2(JSON.parse(l.json))},null,8,R),s("div",V,[s("p",null,i(o.handel(JSON.parse(l.json)).name),1),s("p",Y,i(o.handel1(JSON.parse(l.json))),1)])])):v("",!0),o.handel3(l)?(a(),c("div",q,[s("img",{src:o.handel3(l)},null,8,A)])):v("",!0),s("ul",G,[s("li",M,[P,s("span",null,"\u70B9\u8D5E("+i(l.info.likedCount)+")",1)]),s("li",Q,[T,s("span",null,"\u8F6C\u53D1("+i(l.info.shareCount)+")",1)]),s("li",W,[X,s("span",null,"\u8BC4\u8BBA("+i(l.info.commentCount)+")",1)])])])]))),128))])]),s("div",Z,[s("div",$,[s("div",ss,[s("a",null,[s("img",{src:t.avatarUrl},null,8,es)]),s("p",null,i(t.nickname),1)]),s("ul",ts,[s("li",null,[s("span",null,i(t.eventCount),1),ls]),s("li",ns,[s("span",null,i(t.follows),1),is]),s("li",null,[s("span",null,i(t.followeds),1),os])])])])])],512),[[g,!t.containImg]])])}var rs=m(I,[["render",as],["__scopeId","data-v-4f7f3cae"]]);export{rs as default};
