import{E as c}from"../el-select/el-select.8325e87a.js";import{_ as g,a as m,g as d,o,c as l,b as t,F as p,d as _,e as S,w as b,t as r,p as v,f as C}from"../index-e6aff8d6.js";const f={name:"searchAblum",data(){return{total:100,pageSize:52,pageNo:1,albums:[],emitShow:!0}},mounted(){this.eventHub.$on("getAblum",e=>{this.getDataForSearchSingerAblum()})},methods:{async getDataForSearchSingerAblum(){let e=await m.getDataForSearch(this.$route.params.keywords,this.$route.params.type,this.pageSize,(this.pageNo-1)*this.pageSize);this.total=e.data.result.albumCount,this.albums=e.data.result.albums,this.emitShow&&(this.$emit("on-child",this.total),this.emitShow=!1,console.log("ablum"))},handleSizeChange(e){this.pageSize=e,this.getDataForSearchSingerAblum()},handleCurrentChange(e){this.pageNo=e,this.getDataForSearchSingerAblum()},cutString(e){return e?e.length>8?e.substring(0,7)+"...":e:""},gethotAlbums(e){this.$router.push({name:"singerablumsong",query:{id:e}})}},unmounted(){this.eventHub.$off("getAblum"),console.log(22)}},z=e=>(v("data-v-23704bae"),e=e(),C(),e),A={class:"Album"},y={class:"contain"},w={class:"margin"},D={class:"hoeRecomedt"},k=["onClick"],F=z(()=>t("a",{class:"a"},null,-1));function N(e,i,x,V,s,n){const u=c,h=d("lazy");return o(),l("div",A,[t("div",y,[t("div",w,[t("div",D,[t("ul",null,[(o(!0),l(p,null,_(s.albums,a=>(o(),l("li",{key:a.id,onClick:I=>n.gethotAlbums(a.id)},[b(t("img",null,null,512),[[h,a.picUrl]]),F,t("p",null,r(n.cutString(a.name)),1),t("p",null,r(n.cutString(a.artist.name)),1)],8,k))),128))])]),S(u,{background:"",onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange,modelValue:s.pageNo,"onUpdate:modelValue":i[0]||(i[0]=a=>s.pageNo=a),"page-size":s.pageSize,layout:"prev, pager, next",total:s.total,class:"pagination"},null,8,["onSizeChange","onCurrentChange","modelValue","page-size","total"])])])])}var H=g(f,[["render",N],["__scopeId","data-v-23704bae"]]);export{H as default};
