import{E as h}from"../el-select/el-select.8325e87a.js";import{_ as u,a as c,g as d,o as r,c as s,b as n,F as p,d as S,e as _,w as m,t as v}from"../index-e6aff8d6.js";const C={name:"searchSinger",data(){return{songlist:[],total:0,pageSize:52,pageNo:1,singerlist:[],emitShow:!0}},mounted(){this.eventHub.$on("getSinger",e=>{this.getDataForSearchSinger()})},methods:{async getDataForSearchSinger(){let e=await c.getDataForSearch(this.$route.params.keywords,this.$route.params.type,this.pageSize,(this.pageNo-1)*this.pageSize);this.total=e.data.result.artistCount,this.singerlist=e.data.result.artists,this.emitShow&&(this.$emit("on-child",this.total),this.emitShow=!1,console.log("singer"))},handleSizeChange(e){this.pageSize=e,this.getDataForSearchSinger()},handleCurrentChange(e){this.pageNo=e,this.getDataForSearchSinger()},getSingers(e){this.$router.push({name:"singerdatil",params:{id:e}})},cutString(e){return e?e.length>8?e.substring(0,7)+"...":e:""}},unmounted(){this.eventHub.$off("getSinger"),console.log(22)}},f={class:"searchsinger"},z={class:"contain"},y={class:"singer-list"},D=["onClick"];function k(e,o,w,F,a,i){const g=h,l=d("lazy");return r(),s("div",f,[n("div",z,[n("div",y,[n("ul",null,[(r(!0),s(p,null,S(a.singerlist,t=>(r(),s("li",{key:t.id,onClick:N=>i.getSingers(t.id)},[m(n("img",null,null,512),[[l,t.img1v1Url]]),n("p",null,v(i.cutString(t.name)),1)],8,D))),128))])]),_(g,{background:"",onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange,modelValue:a.pageNo,"onUpdate:modelValue":o[0]||(o[0]=t=>a.pageNo=t),"page-size":a.pageSize,layout:"prev, pager, next",total:a.total,class:"pagination"},null,8,["onSizeChange","onCurrentChange","modelValue","page-size","total"])])])}var V=u(C,[["render",k],["__scopeId","data-v-11840cf8"]]);export{V as default};
